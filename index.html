<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js"></script>
</head>


<style> /* set the CSS */

.line {
    fill: none;
    stroke: steelblue;
    stroke-width: 2px;
}

</style>


<body>


<div id="output"></div>
<!-- Load Babel -->
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<!-- Your custom script here -->
<script type="text/babel">




    // set the dimensions and margins of the graph
    var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = 960 - margin.left - margin.right,
        height = 800 - margin.top - margin.bottom;
    // parse the date / time
    var parseTime = d3.timeParse("%Y");
    // set the ranges
    //var x = d3.scaleTime().range([0, width]);
    var x = d3.scaleLinear().range([0, 100]);
    //var y = d3.scaleLinear().range([height, 0]);
    var y = d3.scaleTime().range([0, height]);

    var line = d3.line()
        .x(function(d) { return d.x; })
        .y(function(d) { return y(new Date(d.y)); })
        .curve(d3.curveCatmullRom.alpha(0.5));

    // append the svg obgect to the body of the page
    // appends a 'group' element to 'svg'
    // moves the 'group' element to the top left margin
    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");



    var jsonCircles = [
        { "Milestone": "2015-01-01",
            "text": "",
            "color" : "green"
        },

        { "Milestone": "2018-03-31",
            "text": "XXX",
            "color" : "purple"
        },
        { "Milestone": "2018-04-30",
            "text":"XXX",
            "color" : "red"
        },
        { "Milestone": "2020-04-30",
            "text":"XXX",
            "color" : "red"
        }
    ];

    var data = [
        {x:0,y:"2018-03-31"},
        {x:1,y:"2017-03-31"}
    ];

    // Scale the range of the data
    //x.domain(d3.extent(data, function(d) { return d.Date; }));
    x.domain([0, 1]);

    // y.domain([0, d3.max(data, function(d) {
    //    return Math.max(d.Imports, d.Exports); })]);
    y.domain(d3.extent(jsonCircles, function(d) { return new Date(d.Milestone); }));


    var circles = svg.selectAll("circle")
        .data(jsonCircles)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
            //console.log(d.Date);
            return 0; })
        .attr("cy", function (d) { return y(new Date(d.Milestone)); })
        .attr("r", function (d) { return 5; })
        .style("fill", function(d) { return "red"; });


    var link = d3.linkHorizontal()
        .x(function(d) {
            console.log(d[0]);
            return x(d[0]);
        })
        .y(function(d) {
            return y(new Date(d[1]));
        });

    var k1= link(
        {
            source: [0, "2018-03-31"],
            target: [1, "2017-03-31"]
        },
        {
            source: [0, "2018-03-31"],
            target: [1, "2020-03-31"]
        },
        {"source": 0, "target": "2018-03-31"},
        {"source": 1, "target": "2017-03-31"},

    );



    var circles1 = svg.selectAll("path")
        .data(data)
        .enter()
        .append("path")
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-linejoin", "round")
        .attr("stroke-linecap", "round")
        .attr("stroke-width", 1.5)
        .attr('d', k1);



    // Add the Y Axis
    svg.append("g")
        .call(d3.axisLeft(y));



</script>


</body>
</html>